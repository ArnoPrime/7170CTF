<!DOCTYPE html>
<header>
    <title>brute force</title>
</header>

<body>

    <img src="https://www.hkbu.edu.hk/eng/images/logo.png">
    <h1>Hello brute force</h1>
    <button type="button" class="btn btn-default" onclick="window.location.href='index.html'">Back</button>
    <div class="input-group">
        Username=admin<input type="text" class="form-control" placeholder="username" name="username">
        <input type="text" class="form-control" placeholder="password" name="password" id="password">
        <a href="http://hkbuctf.hopto.org:3780/static/1million_password.txt">password list</a>
        <input type="submit" value="测试" onclick="test()" />
        <button name="submit" id="submit">submit</button>
    </div>
    </div>
    <div id="result"></div>
</body>
<!-- <script>
    //测试
    function test() {
        //获取 输入框的值
        // alert(document.getElementById("password").value);
        result.innerHTML = document.getElementById("password").value;
    }
    const btn = document.getElementsByName('submit')[0];
    const result = document.getElementById("result");
    const password = document.getElementById("password").value;
    var formData = new FormData();
    btn.onclick = function () {
        formData.append('password',password);
        const xhr = new XMLHttpRequest();
        xhr.open('POST', 'http://127.0.0.1:8000/server');
        xhr.send(formData);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                if (xhr.status >= 200 && xhr.status < 600) {
                    result.innerHTML = xhr.response;
                    // console.log(xhr.getAllResponseHeaders());
                } else {

                }

            }
        }
    }
</script> -->
<!-- <script>
    const btn = document.getElementsByName('submit')[0];
    const result = document.getElementById("result");
    var url = 'http://127.0.0.1:8000/server';
    const data = { username: 'example' };
    btn.onclick = function () {
        fetch(url, {
            method: 'POST', // or 'PUT'
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });

        // fetch(url).then(function (response, request) {
        //     response.Headers.Add("Access-Control-Allow-Origin", "*");
        //     return response.json();
        // }).then(function (data) {
        //     result.innerHTML = data;
        //     var datastr = JSON.stringify(data);
        //     console.log(datastr);
        // }).catch(function (e) {
        //     console.log("Oops, error");
        // });
        // fetch(url).then(function (response,request) {
        //     // handle HTTP response
        //     result.innerHTML=response;
        // }, function (error) {
        //     // handle network error
        //     console.log("Oops, error");
        // })
        // 使用fetch发送请求
        //     fetch('http://127.0.0.1:8000/server', { method: 'post',body:document.getElementById("password").value})
        // // 第一个then  设置请求的格式
        //     .then(e => e.json())
        //     // 第二个then 处理回调
        //     .then((data) => {
        //         var datastr = JSON.stringify(data);
        //         result.innerHTML = datastr;
        // }).catch(e => console.log("Oops, error", e))

    }
</script> -->
<script>
    const btn = document.getElementsByName('submit')[0];
    const data = { username: 'example' };
    btn.onclick = function () {
        fetch('http://127.0.0.1:8000/server', {
            method: 'POST', // or 'PUT'
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    }
</script>

</html>